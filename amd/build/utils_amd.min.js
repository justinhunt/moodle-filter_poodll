define ("filter_poodll/utils_amd",["jquery","core/log"],function(a,b){"use strict";b.debug("Filter PoodLL: utils initialising");return{timeouthandles:[],WhiteboardUploadHandler:function WhiteboardUploadHandler(b,c,d,e){var f=a("#"+b+"_btn_upload_whiteboard")[0];f.disabled=!0;clearTimeout(this.timeouthandles[b]);var g=this.getCvs(b,c,d);this.pokeVectorData(b,c,d);e.uploadFile(g.toDataURL(),"image")},getCvs:function getCvs(a,b){if(0==a.indexOf("drawingboard_")){var c=b.canvas}else{var c=b.canvasForExport()}return c},escapeColon:function escapeColon(a){return a.replace(/:/,"\\:")},pokeVectorData:function pokeVectorData(c,d,e){var f="";if(0==c.indexOf("drawingboard_")){f=JSON.stringify(d.history,null,2)}else{f=JSON.stringify(d.getSnapshot())}if("undefined"!=typeof e.vectorcontrol&&""!==e.vectorcontrol){a("#"+this.escapeColon(e.vectorcontrol)).val(f);b.debug("Vectorcontrol:"+e.vectorcontrol)}},_concatenateWavBlobs:function _concatenateWavBlobs(a,b){for(var c=[],d=0,e=0,f=a.length,g=0;g<f;g++){(function(h){var i=new FileReader;i.onload=function(){var a=this.result,g=a.slice(44);e+=g.byteLength;c[h]=g;d++;if(d==f){var i=a.slice(0,44),j=new DataView(i);j.setUint32(40,e,!0);c.unshift(i);var k=new Blob(c,{type:"audio/wav"});b(k)}};i.readAsArrayBuffer(a[g])})(g)}},_standardConcatenateBlobs:function _standardConcatenateBlobs(a,b,c){var f=[],g=0;function d(){if(!a[g]){return e()}var b=new FileReader;b.onload=function(a){f.push(a.target.result);g++;d()};b.readAsArrayBuffer(a[g])}function e(){var a=0;f.forEach(function(b){a+=b.byteLength});var d=new Uint16Array(a),e=0;f.forEach(function(a){var b=a.byteLength;if(0!=b%2){a=a.slice(0,b-1)}d.set(new Uint16Array(a),e);e+=b});var g=new Blob([d.buffer],{type:b});c(g)}d()},_simpleConcatenateBlobs:function _simpleConcatenateBlobs(a,b){return new Blob(a,{type:b})},doConcatenateBlobs:function doConcatenateBlobs(a,b){switch(a[0].type){case"audio/wav":case"audio/pcm":this._concatenateWavBlobs(a,b);break;case"audio/ogg":case"audio/webm":case"video/webm":default:var c=this._simpleConcatenateBlobs(a,a[0].type);b(c);break;case"old default":this._standardConcatenateBlobs(a,a[0].type,b);}},bytesToSize:function bytesToSize(a){if(0===a){return"0 Bytes"}var b=parseInt(Math.floor(Math.log(a)/Math.log(1000)),10);return(a/Math.pow(1000,b)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][b]},getTimeLength:function getTimeLength(a){var b=new Date(a);return b.getUTCHours()+" hours, "+b.getUTCMinutes()+" minutes and "+b.getUTCSeconds()+" second(s)"},has_mediarecorder:function has_mediarecorder(){return"undefined"!=typeof MediaRecorder},can_html5_record:function can_html5_record(a){if(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if("audio"==a){return!0}else{return this.has_mediarecorder()}}else{return!1}},is_edge:function is_edge(){return-1<navigator.userAgent.indexOf("Edge")},is_chrome:function is_chrome(){var a=window.chrome,b=window.navigator,c=b.vendor,d=-1<b.userAgent.indexOf("OPR"),e=-1<b.userAgent.indexOf("Edge"),f=b.userAgent.match("CriOS");if(f){return!0}else if(null!==a&&"undefined"!=typeof a&&"Google Inc."===c&&!1==d&&!1==e){return!0}else{return!1}},is_safari:function is_safari(){return /^((?!chrome|android).)*safari/i.test(navigator.userAgent)},is_ios:function is_ios(){return /iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},is_opera:function is_opera(){return"undefined"!=typeof opera&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("OPR/")},is_android:function is_android(){var a=window.navigator.userAgent,b=-1<a.indexOf("android")||-1<a.indexOf("Android");return b},is_ie:function is_ie(){var a=!1,b=window.navigator.userAgent,c=b.indexOf("MSIE "),d=b.indexOf("Trident/"),e=b.indexOf("Edge/");if(-1<c||-1<d||-1<e){a=!0}return a},parseQueryString:function parseQueryString(a){var b={};a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,c,d,e){b[c]=e});return b}}});
//# sourceMappingURL=utils_amd.min.js.map
